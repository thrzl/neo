---
import Layout from "../../layouts/Layout.astro";
import { render } from "astro:content";
import { getEntry, getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

export async function getStaticPaths() {
    const posts: CollectionEntry<'blog'>[] = await getCollection('blog')

    return posts.map((post) => {
        return { params: { slug: post.id } };
    });
}
const { slug } = Astro.params

const post = await getEntry('blog', slug)
const { Content } = await render(post)
---
<Layout title="garden" description="my thoughts and ruminations">
        <div class="w-full text-center "><a href="/garden" class="mx-auto italic b-b-2 b-green-7 b-dotted hover:text-shadow-[0_0_0.125rem_white] hover:b-green-5">see other posts...</a></div>
        <hr class="divider"/>
        <section class="mb-4">
            <h1 class="text-2xl font-bold b-b-dotted b-b-1 b-b-green w-max">
                {post.data.title} <br/>
            </h1>
            <p class="italic text-base font-normal lowercase op-70">written on {post.data.date.toDateString()}</p>
        </section>
        <div class="prose text-lg"><Content/></div>
</Layout>
