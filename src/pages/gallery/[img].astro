---
import type { GetStaticPaths } from "astro";
const { img } = Astro.params;
import Image from "astro/components/Image.astro";
import Layout from "../../layouts/Layout.astro";

function importImage() {
    return import(`../../assets/gallery/${img}`)
}

export const getStaticPaths = (() => {
    const imageImports = import.meta.glob<{default: ImageMetadata}>('../../assets/gallery/*.{jpg,jpeg,png,gif,webp,avif}');
    return Object.keys(imageImports).map((path) => {return {params: {img: path.replace("../../assets/gallery/", "")}}});
}) satisfies GetStaticPaths;
---

<Layout>
    <Image src={importImage()} alt="blah"/>
</Layout>
